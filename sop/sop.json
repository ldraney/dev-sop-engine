{
  "version": "1.0",
  "enforcement": "hard",

  "rules": {
    "require-issue": {
      "description": "Require GitHub issue for code changes",
      "events": ["PreToolUse"],
      "matcher": "Write|Edit",
      "validator": "validators/require-issue.sh",
      "enabled": true
    },

    "no-main-commit": {
      "description": "Block commits on main/master and require issue branch",
      "events": ["PreToolUse"],
      "matcher": "Bash",
      "condition": "git.*commit",
      "validator": "validators/no-main-commit.sh",
      "enabled": true
    },

    "push-before-switch": {
      "description": "Require push before switching branches",
      "events": ["PreToolUse"],
      "matcher": "Bash",
      "condition": "git (checkout|switch)|git -C [^ ]+ (checkout|switch)",
      "validator": "validators/push-before-switch.sh",
      "enabled": true
    }
  },

  "logging": {
    "enabled": true,
    "stderr": true,
    "file": "~/.claude/logs/sop-hooks.jsonl",
    "events": ["PreToolUse", "SessionStart", "SessionEnd"],
    "include_blocked_only": false,
    "handler": "loggers/log-event.sh"
  },

  "subagents": {
    "inherit_rules": true
  }
}
